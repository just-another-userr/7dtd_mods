<configs>


<!-- Stack size modifications -->
<setattribute xpath="/items/item[@name='ammo762mmBulletBall' or @name='ammo9mmBulletBall' or @name='ammoShotgunShell']/property[@name='Stacknumber']" name="value">3000</setattribute>
<setattribute xpath="/items/item[@name='casinoCoin']/property[@name='Stacknumber']" name="value">1000000</setattribute>
<setattribute xpath="/items/item[@name='drugVitamins']/property[@name='Stacknumber']" name="value">6000</setattribute>
<setattribute xpath="/items/item[@name='ammoGasCan']/property[@name='Stacknumber']" name="value">100000</setattribute>
<setattribute xpath="/items/item[@name='medicalFirstAidBandage' or @name='medicalFirstAidKit']/property[@name='Stacknumber']" name="value">20</setattribute>

<!-- Add Forged Lead to allowed upgrade items for the repair tools -->
<csv xpath="/items/item[starts-with(@name, 'meleeToolRepair')]/property[@class='Action1']/property[@name='Allowed_upgrade_items']/@value" op="Add">resourceForgedLeadTMG</csv>

<!-- Add unlocked property to vitamin item -->
<insertafter xpath="/items/item[@name='drugVitamins']/property[@name='Stacknumber']">
	<property name="UnlockedBy" value="craftingMedical"/>
</insertafter>

<!-- Append flaming shotgun ammo to the allowed ammo list for all shotguns-->
<csv xpath="/items/item[starts-with(@name, 'gunShotgunT')]/property[@class='Action0']/property[@name='Magazine_items']/@value" op="Add">ammoShotgunShellIncendiaryTMG</csv>
<!-- Append flaming 44 ammo to the allowed ammo list for 44 magnum and desert vulture -->
<csv xpath="/items/item[@name='gunHandgunT2Magnum44' or @name='gunHandgunT3DesertVulture']/property[@class='Action0']/property[@name='Magazine_items']/@value" op="Add">ammo44MagnumFlamingTMG</csv>

<!-- Begin appends for ForgedTitanium and Forged Lead + Erin's Rage -->
<append xpath="/items">

<!-- Forged Titanium (mod proof of concept, doesn't have any in game uses currently)-->
<item name="resourceForgedTitaniumTMG">
	<property name="HoldType" value="45"/>
	<property name="Meshfile" value="@:Other/Items/Misc/sackPrefab.prefab"/>
	<property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
	<property name="Material" value="Mmetal"/>
	<property name="Stacknumber" value="500"/> <!-- STK resource -->
	<property name="EconomicValue" value="100"/>
	<property name="Group" value="Resources"/>
	<property name="RepairTime" value="1"/>
	<property name="RepairAmount" value="1000"/>
</item>

<item name="resourceForgedLeadTMG">
    <property name="CustomIcon" value="resourceForgedSteel" />
    <property name="CustomIconTint" value="#0000cc" />
	<property name="HoldType" value="45"/>
	<property name="Meshfile" value="@:Other/Items/Misc/sackPrefab.prefab"/>
	<property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
	<property name="Material" value="MresourceScrapLeadSmall"/>
	<property name="Stacknumber" value="2000"/> <!-- STK resource -->
	<property name="EconomicValue" value="10"/>
	<property name="Group" value="Resources"/>
	<property name="CraftingIngredientTime" value="8"/>
	<property name="RepairTime" value="1"/>
	<property name="RepairAmount" value="400"/>
	<property name="SoundPickup" value="forgedmetal_grab"/>
	<property name="SoundPlace" value="forgedmetal_place"/>
</item>
<!-- Erin's Rage (Initial mod proof of concept along with the stack size increases)-->
<item name="drinkErinsRageTMG">
    <property name="CustomIcon" value="drinkYuccaJuiceSmoothie" />
    <property name="CustomIconTint" value="#fc5203" />
	<property name="Tags" value="drinks,foodSkill,fitness"/>
	<property name="HoldType" value="3"/>
	<property name="DisplayType" value="drinkErinsRageTMG"/>
	<property name="Meshfile" value="@:Other/Items/Food/bottled_waterPrefab.prefab"/>
	<property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
	<property name="Material" value="Mglass"/>
	<property name="Stacknumber" value="6000"/> <!-- STK drink -->
	<!-- <property name="Weight" value="10"/> -->
	<property name="EconomicValue" value="200"/>
	<property name="UnlockedBy" value="craftingFood"/><!-- perkMasterChef,drinkYuccaJuiceSmoothieSchematic, -->
	<property name="SoundPickup" value="jars_grab"/>
	<property name="SoundPlace" value="jars_place"/>
	<property class="Action0">
		<property name="Class" value="Eat"/>
		<property name="Delay" value="1.0"/>
		<property name="Sound_start" value="player_drinking"/>
		<!-- <property name="Create_item" value="drinkJarEmpty"/> -->
	</property>
	<!-- <property name="Group" value="Food/Cooking,CFDrink/Cooking"/> -->
	<effect_group tiered="false" name="Drink Tier 3">
		<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffBurningElement"/>	
		<requirement name="NotHasBuff" buff="buffIsOnFire"/>
		<display_value name="dHarvestSalvage" value=".2"/>
		<display_value name="dRunSpeed" value=".2"/>
		<display_value name="dDuration" value="363"/>
		<passive_effect name="RunSpeed" operation="perc_add" value=".2"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$buffMegaCrushDuration" operation="add" value="363"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$buffMegaCrushDuration" operation="set" value="363">
			<requirement name="CVarCompare" cvar="$buffMegaCrushDuration" operation="GT" value="363"/></triggered_effect>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffProcessConsumables,buffMegaCrush"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$buffDrugHackersDuration" operation="add" value="363"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$buffDrugHackersDuration" operation="set" value="363">
			<requirement name="CVarCompare" cvar="$buffDrugHackersDuration" operation="GT" value="363"/></triggered_effect>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffDrugHackers"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffProcessConsumables"/>
	</effect_group>
	<effect_group tiered="false">
		<requirement name="HasBuff" buff="buffIsOnFire"/>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffExtinguishFire"/>
	</effect_group>
</item>
<!-- Flaming shotgun ammo -->
<item name="ammoShotgunShellIncendiaryTMG">
	<property name="Tags" value="ammo,shotgun,ammoShells"/>
	<property name="DisplayType" value="ammoShotgunShellIncendiaryTMG"/>
	<property name="HoldType" value="45"/>
	<property name="Meshfile" value="@:Other/Items/Misc/sackPrefab.prefab"/>
	<property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
	<property name="Material" value="Mlead_scrap"/>
	<property name="TraderStageTemplate" value="ammoTier1"/>
	<property name="Group" value="Ammo/Weapons,Ammo,Ranged Weapons"/>
	<property name="SoundPickup" value="shotgunshells_grab"/>
	<property name="SoundPlace" value="shotgunshells_place"/>
	<property name="Stacknumber" value="3000"/>
	<property name="Damage_type" value="Heat"/>
	<property name="UnlockedBy" value="perkShotgunMessiahComplete"/> <!-- BOOK_PERK -->
	<!-- <property name="ActivationTransformToHide" value="LightMover;Flames;Smoke;ClothFlames;ClothFlamesLight"/> -->
	<property name="EconomicValue" value="25"/>
	<effect_group name="ammoShotgunShell" tiered="false">
		<passive_effect name="EntityDamage" operation="base_set" value="12" tags="perkBoomstick"/>
		<passive_effect name="BlockDamage" operation="base_set" value="5.4" tags="perkBoomstick"/>
		<passive_effect name="RoundRayCount" operation="base_set" value="10" tags="perkBoomstick"/>
		<passive_effect name="MaxRange" operation="base_set" value="10" tags="perkBoomstick"/>
		<passive_effect name="DamageFalloffRange" operation="base_set" value="4" tags="perkBoomstick"/>
		<passive_effect name="EntityPenetrationCount" operation="base_set" value="2" tags="perkBoomstick"/>
		<passive_effect name="BlockPenetrationFactor" operation="base_set" value="51" tags="perkBoomstick"/>
		<passive_effect name="SpreadDegreesVertical" operation="base_set" value="4.5" tags="perkBoomstick"/>
		<passive_effect name="SpreadDegreesHorizontal" operation="base_set" value="4.5" tags="perkBoomstick"/>
		<passive_effect name="SpreadMultiplierAiming" operation="perc_add" value="-.13" tags="perkBoomstick"/>
		<passive_effect name="SpreadMultiplierCrouching" operation="perc_add" value="-.05" tags="perkBoomstick"/>
		<passive_effect name="SpreadMultiplierWalking" operation="perc_add" value=".15" tags="perkBoomstick"/>
		<passive_effect name="SpreadMultiplierRunning" operation="perc_add" value=".3" tags="perkBoomstick"/>
		<passive_effect name="DamageModifier" operation="perc_add" value="-.8" tags="earth"/>
		<display_value name="dEntityDamageFire" value="160"/>
		<display_value name="dDuration" value="10"/>
		<!-- <triggered_effect trigger="onProjectileImpact" action="AddBuff" target="other" buff="buffBurningFlamingArrow">
			<requirement name="CVarCompare" target="other" cvar="_underwater" operation="LT" value="0.3"/>
		</triggered_effect> -->
	</effect_group>
	<effect_group name="new Fire Proc" tiered="false">
                <requirement name="CVarCompare" cvar="_underwater" operation="LT" value=".93"/> <!-- Ensure the target is not underwater -->
                <requirement name="RandomRoll" seed_type="Random" target="self" min_max="0,100" operation="LTE" value="100"/> <!-- 100% chance for fire effect -->
                
                <!-- Triggers a burning buff on the entity hit by the weapon -->
                <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" target="other" buff="buffBurningElement"/>
                
                <!-- Sets the duration of the burning effect based on the player's progression level -->
                <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" target="other" cvar="$buffBurningElementDuration" operation="set" value="10">
                    <requirement name="ProgressionLevel" progression_name="perkFiremansAlmanacMolotov" operation="Equals" value="0"/>
                </triggered_effect>
                <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" target="other" cvar="$buffBurningElementDuration" operation="set" value="11">
                    <requirement name="ProgressionLevel" progression_name="perkFiremansAlmanacMolotov" operation="Equals" value="1"/>
                </triggered_effect>
            </effect_group>
            
            <!-- Fire Proc Refresh Effect Group -->
            <!-- This effect group ensures that an existing burning effect on an entity is refreshed when hit again -->
            <effect_group name="always refresh existing Fire Proc" tiered="false">
                <requirement name="CVarCompare" cvar="_underwater" operation="LT" value=".93"/> <!-- Ensure the target is not underwater -->
                <requirement name="HasBuff" target="other" buff="buffBurningElement"/> <!-- Only apply if the target already has the burning buff -->
                
                <!-- Refreshes the burning buff on the entity hit by the weapon -->
                <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" target="other" buff="buffBurningElement"/>
                
                <!-- Sets the duration of the burning effect based on the player's progression level -->
                <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" target="other" cvar="$buffBurningElementDuration" operation="set" value="11">
                    <requirement name="ProgressionLevel" progression_name="perkFiremansAlmanacMolotov" operation="Equals" value="1"/>
                </triggered_effect>
            </effect_group>
</item>
<!-- Flaming 44 ammo -->
<item name="ammo44MagnumFlamingTMG">
	<property name="Tags" value="ammo44Mag"/>
	<property name="DisplayType" value="ammo44MagnumFlamingTMG"/>
	<property name="HoldType" value="45"/>
	<property name="Meshfile" value="@:Other/Items/Misc/sackPrefab.prefab"/>
	<property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
	<property name="Material" value="Mbrass"/>
	<property name="MeltTimePerUnit" value=".4"/>
	<property name="Stacknumber" value="300"/> <!-- STK ammo high -->
	<property name="EconomicValue" value="9"/>
	<property name="TraderStageTemplate" value="ammoTier1"/><!-- ammo9mmBulletBall -->
	<property name="Group" value="Ammo/Weapons,Ammo,Ranged Weapons"/>
	<property name="SoundPickup" value="bullets_grab"/>
	<property name="SoundPlace" value="bullets_place"/>
	<effect_group name="ammo44dmg" tiered="false">
		<passive_effect name="EntityDamage" operation="base_set" value="32" tags="perkGunslinger,9mmGun"/>
		<passive_effect name="BlockDamage" operation="base_set" value="6" tags="perkGunslinger"/>
		<passive_effect name="BlockDamage" operation="base_add" value="18" tags="barrelExplosive"/>
		<passive_effect name="DamageModifier" operation="perc_add" value="-.8" tags="earth"/>
		<passive_effect name="DamageModifier" operation="perc_add" value="2" tags="wood"/>
		<display_value name="dEntityDamageFire" value="160"/>
		<display_value name="dDuration" value="10"/>	
	</effect_group>

		<effect_group tiered="false">
			<requirement name="HasBuff" buff="buffEnforcerSetBonus"/>
				<passive_effect name="EntityDamage" operation="perc_add" value=".05">
					<requirement name="ArmorGroupLowestQuality" group_name="groupEnforcer" operation="Equals" value="1"/>
				</passive_effect>
				<passive_effect name="EntityDamage" operation="perc_add" value=".1">
					<requirement name="ArmorGroupLowestQuality" group_name="groupEnforcer" operation="Equals" value="2"/>
				</passive_effect>
				<passive_effect name="EntityDamage" operation="perc_add" value=".15">
					<requirement name="ArmorGroupLowestQuality" group_name="groupEnforcer" operation="Equals" value="3"/>
				</passive_effect>
				<passive_effect name="EntityDamage" operation="perc_add" value=".2">
					<requirement name="ArmorGroupLowestQuality" group_name="groupEnforcer" operation="Equals" value="4"/>
				</passive_effect>
				<passive_effect name="EntityDamage" operation="perc_add" value=".25">
					<requirement name="ArmorGroupLowestQuality" group_name="groupEnforcer" operation="Equals" value="5"/>
				</passive_effect>
				<passive_effect name="EntityDamage" operation="perc_add" value=".5">
					<requirement name="ArmorGroupLowestQuality" group_name="groupEnforcer" operation="Equals" value="6"/>
				</passive_effect>
		</effect_group>
		<effect_group name="new Fire Proc" tiered="false">
            <requirement name="CVarCompare" cvar="_underwater" operation="LT" value=".93"/> <!-- Ensure the target is not underwater -->
            <requirement name="RandomRoll" seed_type="Random" target="self" min_max="0,100" operation="LTE" value="100"/> <!-- 100% chance for fire effect -->
                
                <!-- Triggers a burning buff on the entity hit by the weapon -->
                <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" target="other" buff="buffBurningElement"/>
                
                <!-- Sets the duration of the burning effect based on the player's progression level -->
                <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" target="other" cvar="$buffBurningElementDuration" operation="set" value="10">
                    <requirement name="ProgressionLevel" progression_name="perkFiremansAlmanacMolotov" operation="Equals" value="0"/>
                </triggered_effect>
                <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" target="other" cvar="$buffBurningElementDuration" operation="set" value="11">
                    <requirement name="ProgressionLevel" progression_name="perkFiremansAlmanacMolotov" operation="Equals" value="1"/>
                </triggered_effect>
            </effect_group>
            
            <!-- Fire Proc Refresh Effect Group -->
            <!-- This effect group ensures that an existing burning effect on an entity is refreshed when hit again -->
            <effect_group name="always refresh existing Fire Proc" tiered="false">
                <requirement name="CVarCompare" cvar="_underwater" operation="LT" value=".93"/> <!-- Ensure the target is not underwater -->
                <requirement name="HasBuff" target="other" buff="buffBurningElement"/> <!-- Only apply if the target already has the burning buff -->
                
                <!-- Refreshes the burning buff on the entity hit by the weapon -->
                <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" target="other" buff="buffBurningElement"/>
                
                <!-- Sets the duration of the burning effect based on the player's progression level -->
                <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" target="other" cvar="$buffBurningElementDuration" operation="set" value="11">
                    <requirement name="ProgressionLevel" progression_name="perkFiremansAlmanacMolotov" operation="Equals" value="1"/>
                </triggered_effect>
            </effect_group>
</item>

</append>

</configs>